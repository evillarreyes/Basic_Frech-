const phrasesData = {
    "Saludos": [
        { fr: "Bonjour", es: "Buenos d√≠as / Hola (formal/durante el d√≠a)" },
        { fr: "Salut", es: "Hola (informal)" },
        { fr: "Bonsoir", es: "Buenas tardes / Buenas noches (al llegar, desde aprox. 6 PM)" },
        { fr: "Bonne nuit", es: "Buenas noches (al despedirse para ir a dormir)" },
        { fr: "Au revoir", es: "Adi√≥s" },
        { fr: "√Ä bient√¥t", es: "Hasta pronto" },
        { fr: "√Ä plus tard", es: "Hasta luego (si se ven el mismo d√≠a)" },
        { fr: "√Ä demain", es: "Hasta ma√±ana" },
        { fr: "Comment allez-vous ?", es: "¬øC√≥mo est√° usted? (formal)" },
        { fr: "Comment vas-tu ?", es: "¬øC√≥mo est√°s? (informal)" },
        { fr: "√áa va ?", es: "¬øQu√© tal? / ¬øC√≥mo va? (informal)" },
        { fr: "Tr√®s bien, merci. Et vous ?", es: "Muy bien, gracias. ¬øY usted?" },
        { fr: "Tr√®s bien, merci. Et toi ?", es: "Muy bien, gracias. ¬øY t√∫?" },
        { fr: "Bienvenue", es: "Bienvenido/a" }
    ],
    "Frases de Cortes√≠a": [
        { fr: "S'il vous pla√Æt", es: "Por favor (formal)" },
        { fr: "S'il te pla√Æt", es: "Por favor (informal)" },
        { fr: "Merci (beaucoup)", es: "Gracias (muchas)" },
        { fr: "De rien", es: "De nada" },
        { fr: "Je vous en prie", es: "De nada (formal) / Se lo ruego" },
        { fr: "Je t'en prie", es: "De nada (informal)" },
        { fr: "Excusez-moi", es: "Disc√∫lpeme (formal)" },
        { fr: "Excuse-moi", es: "Disc√∫lpame (informal)" },
        { fr: "Pardon", es: "Perd√≥n" },
        { fr: "Avec plaisir", es: "Con gusto" }
    ],
    "Acuerdo y Desacuerdo": [
        { fr: "Oui", es: "S√≠" },
        { fr: "Non", es: "No" },
        { fr: "D'accord", es: "De acuerdo" },
        { fr: "Je suis d'accord", es: "Estoy de acuerdo" },
        { fr: "Je ne suis pas d'accord", es: "No estoy de acuerdo" },
        { fr: "Bien s√ªr", es: "Por supuesto / Claro que s√≠" },
        { fr: "Exactement", es: "Exactamente" },
        { fr: "Peut-√™tre", es: "Quiz√°s / Tal vez" },
        { fr: "Je ne pense pas", es: "No creo / No pienso as√≠" },
        { fr: "C'est vrai", es: "Es verdad" },
        { fr: "C'est faux", es: "Es falso" }
    ],
    "Familia": [
        { fr: "La famille", es: "La familia" },
        { fr: "Le p√®re", es: "El padre" },
        { fr: "La m√®re", es: "La madre" },
        { fr: "Les parents", es: "Los padres" },
        { fr: "Le fils", es: "El hijo" },
        { fr: "La fille", es: "La hija" },
        { fr: "L'enfant / Les enfants", es: "El ni√±o/a / Los ni√±os/as (o hijos)" },
        { fr: "Le fr√®re", es: "El hermano" },
        { fr: "La s≈ìur", es: "La hermana" },
        { fr: "Le grand-p√®re", es: "El abuelo" },
        { fr: "La grand-m√®re", es: "La abuela" },
        { fr: "Les grands-parents", es: "Los abuelos" },
        { fr: "L'oncle", es: "El t√≠o" },
        { fr: "La tante", es: "La t√≠a" },
        { fr: "Le cousin / La cousine", es: "El primo / La prima" },
        { fr: "Le neveu", es: "El sobrino" },
        { fr: "La ni√®ce", es: "La sobrina" },
        { fr: "Le mari / L'√©poux", es: "El esposo / marido" },
        { fr: "La femme / L'√©pouse", es: "La esposa / mujer" }
    ],
    "Comidas Comunes": [
        { fr: "Le pain", es: "El pan" },
        { fr: "Le fromage", es: "El queso" },
        { fr: "Le lait", es: "La leche" },
        { fr: "L'eau", es: "El agua" },
        { fr: "Le vin", es: "El vino" },
        { fr: "Le caf√©", es: "El caf√©" },
        { fr: "Le th√©", es: "El t√©" },
        { fr: "Le poulet", es: "El pollo" },
        { fr: "Le poisson", es: "El pescado" },
        { fr: "La viande", es: "La carne" },
        { fr: "Les l√©gumes", es: "Las verduras" },
        { fr: "Les fruits", es: "Las frutas" },
        { fr: "Le riz", es: "El arroz" },
        { fr: "Les p√¢tes", es: "La pasta" },
        { fr: "Le dessert", es: "El postre" },
        { fr: "Le petit-d√©jeuner", es: "El desayuno" },
        { fr: "Le d√©jeuner", es: "El almuerzo" },
        { fr: "Le d√Æner", es: "La cena" }
    ],
    "Colores": [
        { fr: "Rouge", es: "Rojo" },
        { fr: "Bleu / Bleue", es: "Azul" },
        { fr: "Vert / Verte", es: "Verde" },
        { fr: "Jaune", es: "Amarillo" },
        { fr: "Noir / Noire", es: "Negro" },
        { fr: "Blanc / Blanche", es: "Blanco" },
        { fr: "Gris / Grise", es: "Gris" },
        { fr: "Orange", es: "Naranja" },
        { fr: "Rose", es: "Rosa" },
        { fr: "Violet / Violette", es: "Violeta / Morado" },
        { fr: "Marron", es: "Marr√≥n" },
        { fr: "Beige", es: "Beige" }
    ],
    "N√∫meros (b√°sicos)": [
        { fr: "Un / Une", es: "Uno / Una" },
        { fr: "Deux", es: "Dos" },
        { fr: "Trois", es: "Tres" },
        { fr: "Quatre", es: "Cuatro" },
        { fr: "Cinq", es: "Cinco" },
        { fr: "Six", es: "Seis" },
        { fr: "Sept", es: "Siete" },
        { fr: "Huit", es: "Ocho" },
        { fr: "Neuf", es: "Nueve" },
        { fr: "Dix", es: "Diez" },
        { fr: "Onze", es: "Once" },
        { fr: "Douze", es: "Doce" },
        { fr: "Vingt", es: "Veinte" },
        { fr: "Trente", es: "Treinta" },
        { fr: "Cent", es: "Cien" },
        { fr: "Mille", es: "Mil" }
    ],
    "D√≠as de la Semana": [
        { fr: "Lundi", es: "Lunes" },
        { fr: "Mardi", es: "Martes" },
        { fr: "Mercredi", es: "Mi√©rcoles" },
        { fr: "Jeudi", es: "Jueves" },
        { fr: "Vendredi", es: "Viernes" },
        { fr: "Samedi", es: "S√°bado" },
        { fr: "Dimanche", es: "Domingo" }
    ],
    "Meses del A√±o": [
        { fr: "Janvier", es: "Enero" },
        { fr: "F√©vrier", es: "Febrero" },
        { fr: "Mars", es: "Marzo" },
        { fr: "Avril", es: "Abril" },
        { fr: "Mai", es: "Mayo" },
        { fr: "Juin", es: "Junio" },
        { fr: "Juillet", es: "Julio" },
        { fr: "Ao√ªt", es: "Agosto" },
        { fr: "Septembre", es: "Septiembre" },
        { fr: "Octobre", es: "Octubre" },
        { fr: "Novembre", es: "Noviembre" },
        { fr: "D√©cembre", es: "Diciembre" }
    ],
    "Estaciones del A√±o": [
        { fr: "Le printemps", es: "La primavera" },
        { fr: "L'√©t√©", es: "El verano" },
        { fr: "L'automne", es: "El oto√±o" },
        { fr: "L'hiver", es: "El invierno" }
    ],
    "Frases de Comparaci√≥n": [
        { fr: "Plus ... que", es: "M√°s ... que (ej: plus grand que - m√°s grande que)" },
        { fr: "Moins ... que", es: "Menos ... que (ej: moins cher que - menos caro que)" },
        { fr: "Aussi ... que", es: "Tan ... como (ej: aussi rapide que - tan r√°pido como)" },
        { fr: "Le/La/Les plus ...", es: "El/La/Los m√°s ... (superlativo, ej: le plus intelligent)" },
        { fr: "Le/La/Les moins ...", es: "El/La/Los menos ... (superlativo, ej: la moins ch√®re)" },
        { fr: "Meilleur(e) que", es: "Mejor que (adjetivo)" },
        { fr: "Mieux que", es: "Mejor que (adverbio)" },
        { fr: "Pire que / Plus mauvais(e) que", es: "Peor que" }
    ],
    "Unidades de Medida (b√°sicas)": [
        { fr: "Un m√®tre", es: "Un metro" },
        { fr: "Un kilom√®tre", es: "Un kil√≥metro" },
        { fr: "Un centim√®tre", es: "Un cent√≠metro" },
        { fr: "Un litre", es: "Un litro" },
        { fr: "Un kilo(gramme)", es: "Un kilo(gramo)" },
        { fr: "Une heure", es: "Una hora" },
        { fr: "Une minute", es: "Un minuto" },
        { fr: "Une seconde", es: "Un segundo" }
    ],
    "Preposiciones y Adverbios de Lugar": [
        { fr: "Dans", es: "En, dentro de" },
        { fr: "Sur", es: "Sobre, encima de" },
        { fr: "Sous", es: "Debajo de" },
        { fr: "Devant", es: "Delante de" },
        { fr: "Derri√®re", es: "Detr√°s de" },
        { fr: "√Ä c√¥t√© de", es: "Al lado de" },
        { fr: "Pr√®s de", es: "Cerca de" },
        { fr: "Loin de", es: "Lejos de" },
        { fr: "Entre", es: "Entre" },
        { fr: "Ici", es: "Aqu√≠" },
        { fr: "L√† / L√†-bas", es: "Ah√≠ / All√°" },
        { fr: "En haut", es: "Arriba" },
        { fr: "En bas", es: "Abajo" },
        { fr: "√Ä gauche", es: "A la izquierda" },
        { fr: "√Ä droite", es: "A la derecha" }
    ],
    "Adverbios de Tiempo": [
        { fr: "Aujourd'hui", es: "Hoy" },
        { fr: "Hier", es: "Ayer" },
        { fr: "Demain", es: "Ma√±ana" },
        { fr: "Maintenant", es: "Ahora" },
        { fr: "Toujours", es: "Siempre" },
        { fr: "Souvent", es: "A menudo / Frecuentemente" },
        { fr: "Parfois / Quelquefois", es: "A veces" },
        { fr: "Jamais", es: "Nunca" },
        { fr: "T√¥t", es: "Temprano" },
        { fr: "Tard", es: "Tarde" },
        { fr: "Bient√¥t", es: "Pronto" }
    ],
    "Ropa Com√∫n": [
        { fr: "Un pantalon", es: "Un pantal√≥n" },
        { fr: "Une chemise", es: "Una camisa" },
        { fr: "Un T-shirt", es: "Una camiseta" },
        { fr: "Une robe", es: "Un vestido" },
        { fr: "Une jupe", es: "Una falda" },
        { fr: "Un pull / Un chandail", es: "Un su√©ter / jersey" },
        { fr: "Une veste", es: "Una chaqueta" },
        { fr: "Un manteau", es: "Un abrigo" },
        { fr: "Des chaussures", es: "Zapatos" },
        { fr: "Des chaussettes", es: "Calcetines" },
        { fr: "Un chapeau", es: "Un sombrero" },
        { fr: "Une √©charpe", es: "Una bufanda" }
    ],
    "Preguntas Frecuentes": [
        { fr: "Comment vous appelez-vous ?", es: "¬øC√≥mo se llama usted? (formal)" },
        { fr: "Comment t'appelles-tu ?", es: "¬øC√≥mo te llamas? (informal)" },
        { fr: "Quel √¢ge avez-vous ?", es: "¬øQu√© edad tiene usted?" },
        { fr: "Quel √¢ge as-tu ?", es: "¬øQu√© edad tienes?" },
        { fr: "D'o√π venez-vous ?", es: "¬øDe d√≥nde es usted?" },
        { fr: "D'o√π viens-tu ?", es: "¬øDe d√≥nde eres?" },
        { fr: "O√π habitez-vous ?", es: "¬øD√≥nde vive usted?" },
        { fr: "O√π habites-tu ?", es: "¬øD√≥nde vives?" },
        { fr: "Parlez-vous anglais / espagnol ?", es: "¬øHabla usted ingl√©s / espa√±ol?" },
        { fr: "Qu'est-ce que c'est ?", es: "¬øQu√© es esto?" },
        { fr: "Combien √ßa co√ªte ?", es: "¬øCu√°nto cuesta?" },
        { fr: "O√π sont les toilettes ?", es: "¬øD√≥nde est√° el ba√±o?" },
        { fr: "Pouvez-vous m'aider ?", es: "¬øPuede ayudarme? (formal)" },
        { fr: "Peux-tu m'aider ?", es: "¬øPuedes ayudarme? (informal)" },
        { fr: "Quelle heure est-il ?", es: "¬øQu√© hora es?" }
    ]
};

const phrasesContainer = document.getElementById('phrasesContainer');

function speak(text, lang = 'fr-FR') {
    if ('speechSynthesis' in window) {
        // Cancelar cualquier habla anterior para evitar colas largas
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        
        // Opcional: intentar seleccionar una voz francesa si hay varias
        const voices = window.speechSynthesis.getVoices();
        const frenchVoice = voices.find(voice => voice.lang === 'fr-FR');
        if (frenchVoice) {
            utterance.voice = frenchVoice;
        }
        // Ajustes opcionales de la voz
        // utterance.pitch = 1; // 0 to 2
        // utterance.rate = 1; // 0.1 to 10
        
        window.speechSynthesis.speak(utterance);
    } else {
        alert('Tu navegador no soporta la s√≠ntesis de voz.');
    }
}

// Asegurarse de que las voces est√©n cargadas antes de intentar usarlas
// Algunas veces, getVoices() retorna un array vac√≠o inicialmente.
if (speechSynthesis.onvoiceschanged !== undefined) {
  speechSynthesis.onvoiceschanged = () => { /* console.log("Voices loaded"); */ };
}


function renderPhrases() {
    for (const category in phrasesData) {
        const categoryDiv = document.createElement('div');
        categoryDiv.classList.add('category');

        const categoryTitle = document.createElement('h2');
        categoryTitle.textContent = category;
        categoryDiv.appendChild(categoryTitle);

        const table = document.createElement('table');
        const thead = document.createElement('thead');
        const headerRow = document.createElement('tr');
        ['Franc√©s', 'Espa√±ol', 'Escuchar'].forEach(headerText => {
            const th = document.createElement('th');
            th.textContent = headerText;
            headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        phrasesData[category].forEach(item => {
            const row = document.createElement('tr');

            const frCell = document.createElement('td');
            frCell.textContent = item.fr;
            row.appendChild(frCell);

            const esCell = document.createElement('td');
            esCell.textContent = item.es;
            row.appendChild(esCell);

            const pronounceCell = document.createElement('td');
            const pronounceButton = document.createElement('button');
            pronounceButton.classList.add('pronounce-btn');
            pronounceButton.textContent = 'üîä'; // Icono de altavoz
            pronounceButton.onclick = () => speak(item.fr);
            pronounceCell.appendChild(pronounceButton);
            row.appendChild(pronounceCell);

            tbody.appendChild(row);
        });
        table.appendChild(tbody);
        categoryDiv.appendChild(table);
        phrasesContainer.appendChild(categoryDiv);
    }
}

// Bot√≥n para volver arriba
const backToTopButton = document.getElementById("backToTopBtn");

window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
    backToTopButton.style.display = "block";
  } else {
    backToTopButton.style.display = "none";
  }
}

function scrollToTop() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}


// Renderizar el contenido cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', renderPhrases);